<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Strophe: util.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Strophe
   &#160;<span id="projectnumber">0.9</span>
   </div>
   <div id="projectbrief">XMPP client library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">util.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Utility functions.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae7ab891499d8c50563b0457856a34e51"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#ae7ab891499d8c50563b0457856a34e51">xmpp_strdup</a> (const xmpp_ctx_t *const ctx, const char *const s)</td></tr>
<tr class="memdesc:ae7ab891499d8c50563b0457856a34e51"><td class="mdescLeft">&#160;</td><td class="mdescRight">implement our own strdup that uses the ctx allocator  <a href="#ae7ab891499d8c50563b0457856a34e51">More...</a><br /></td></tr>
<tr class="separator:ae7ab891499d8c50563b0457856a34e51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee3161ed568bb77988b2b0a4492f4de7"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#aee3161ed568bb77988b2b0a4492f4de7">xmpp_strtok_r</a> (char *s, const char *delim, char **saveptr)</td></tr>
<tr class="memdesc:aee3161ed568bb77988b2b0a4492f4de7"><td class="mdescLeft">&#160;</td><td class="mdescRight">strtok_r(3) implementation.  <a href="#aee3161ed568bb77988b2b0a4492f4de7">More...</a><br /></td></tr>
<tr class="separator:aee3161ed568bb77988b2b0a4492f4de7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2f17ea599e5bc41aef1f34c0f16f849"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#ac2f17ea599e5bc41aef1f34c0f16f849">time_stamp</a> (void)</td></tr>
<tr class="memdesc:ac2f17ea599e5bc41aef1f34c0f16f849"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return an integer based time stamp.  <a href="#ac2f17ea599e5bc41aef1f34c0f16f849">More...</a><br /></td></tr>
<tr class="separator:ac2f17ea599e5bc41aef1f34c0f16f849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cce40a083f7d375b4d9995fed4b62fa"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#a9cce40a083f7d375b4d9995fed4b62fa">time_elapsed</a> (uint64_t t1, uint64_t t2)</td></tr>
<tr class="memdesc:a9cce40a083f7d375b4d9995fed4b62fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the time elapsed between two time stamps.  <a href="#a9cce40a083f7d375b4d9995fed4b62fa">More...</a><br /></td></tr>
<tr class="separator:a9cce40a083f7d375b4d9995fed4b62fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7e396e1cda3bddb6e0c23f98ae6098d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="util_8c.html#ac7e396e1cda3bddb6e0c23f98ae6098d">disconnect_mem_error</a> (xmpp_conn_t *const conn)</td></tr>
<tr class="memdesc:ac7e396e1cda3bddb6e0c23f98ae6098d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disconnect the stream with a memory error.  <a href="#ac7e396e1cda3bddb6e0c23f98ae6098d">More...</a><br /></td></tr>
<tr class="separator:ac7e396e1cda3bddb6e0c23f98ae6098d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Utility functions. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae7ab891499d8c50563b0457856a34e51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7ab891499d8c50563b0457856a34e51">&#9670;&nbsp;</a></span>xmpp_strdup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* xmpp_strdup </td>
          <td>(</td>
          <td class="paramtype">const xmpp_ctx_t *const&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>implement our own strdup that uses the ctx allocator </p>
<p>Duplicate a string. This function replaces the standard strdup library call with a version that uses the Strophe context object's allocator.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>a Strophe context object </td></tr>
    <tr><td class="paramname">s</td><td>a string</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a new allocates string with the same data as s or NULL on error </dd></dl>

</div>
</div>
<a id="aee3161ed568bb77988b2b0a4492f4de7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee3161ed568bb77988b2b0a4492f4de7">&#9670;&nbsp;</a></span>xmpp_strtok_r()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* xmpp_strtok_r </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>delim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>saveptr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>strtok_r(3) implementation. </p>
<p>This function has appeared in POSIX.1-2001, but not in C standard. For example, visual studio older than 2005 doesn't provide strtok_r() nor strtok_s(). </p>

</div>
</div>
<a id="ac2f17ea599e5bc41aef1f34c0f16f849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2f17ea599e5bc41aef1f34c0f16f849">&#9670;&nbsp;</a></span>time_stamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t time_stamp </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return an integer based time stamp. </p>
<p>This function uses gettimeofday or timeGetTime (on Win32 platforms) to compute an integer based time stamp. This is used internally by the event loop and timed handlers.</p>
<dl class="section return"><dt>Returns</dt><dd>an integer time stamp </dd></dl>

</div>
</div>
<a id="a9cce40a083f7d375b4d9995fed4b62fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cce40a083f7d375b4d9995fed4b62fa">&#9670;&nbsp;</a></span>time_elapsed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t time_elapsed </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>t1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>t2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the time elapsed between two time stamps. </p>
<p>This function returns the time elapsed between t1 and t2 by subtracting t1 from t2. If t2 happened before t1, the result will be negative. This function is used internally by the event loop and timed handlers.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t1</td><td>first time stamp </td></tr>
    <tr><td class="paramname">t2</td><td>second time stamp</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of milliseconds between the stamps </dd></dl>

</div>
</div>
<a id="ac7e396e1cda3bddb6e0c23f98ae6098d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7e396e1cda3bddb6e0c23f98ae6098d">&#9670;&nbsp;</a></span>disconnect_mem_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disconnect_mem_error </td>
          <td>(</td>
          <td class="paramtype">xmpp_conn_t *const&#160;</td>
          <td class="paramname"><em>conn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disconnect the stream with a memory error. </p>
<p>This is a convenience function used internally by various parts of the Strophe library for terminating the connection because of a memory error.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>a Strophe connection object </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</body>
</html>
